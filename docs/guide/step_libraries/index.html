<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/documentation/blog/rss.xml" title="Serenity BDD Users Manual Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/documentation/blog/atom.xml" title="Serenity BDD Users Manual Blog Atom Feed"><title data-react-helmet="true">Step Libraries | Serenity BDD Users Manual</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.serenity-bdd.info/documentation/docs/guide/step_libraries"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Step Libraries | Serenity BDD Users Manual"><meta data-react-helmet="true" name="description" content="In Serenity, tests are broken down into reusable steps. An important principle behind Serenity is the idea that it is easier to maintain a test that uses several layers of abstraction to hide the complexity behind different parts of a test."><meta data-react-helmet="true" property="og:description" content="In Serenity, tests are broken down into reusable steps. An important principle behind Serenity is the idea that it is easier to maintain a test that uses several layers of abstraction to hide the complexity behind different parts of a test."><link data-react-helmet="true" rel="shortcut icon" href="/documentation/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.serenity-bdd.info/documentation/docs/guide/step_libraries"><link data-react-helmet="true" rel="alternate" href="https://www.serenity-bdd.info/documentation/docs/guide/step_libraries" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.serenity-bdd.info/documentation/docs/guide/step_libraries" hreflang="x-default"><link rel="stylesheet" href="/documentation/assets/css/styles.b26e7261.css">
<link rel="preload" href="/documentation/assets/js/runtime~main.0edd7ce0.js" as="script">
<link rel="preload" href="/documentation/assets/js/main.76333997.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><img src="/documentation/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/documentation/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/tutorials/first_test">Tutorials</a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/guide/user_guide_intro">User Manual</a><a class="navbar__item navbar__link" href="/documentation/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://johnfergusonsmart.com/serenity-bdd-mentoring/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Get Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="http://expansion.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Learn Serenity BDD Online<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="http://expansion.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Serenity BDD Coaching<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">User Guide</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/guide/user_guide_intro">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/guide/getting_started">Creating A New Project</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/guide/maven">Using Maven with Serenity</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documentation/docs/guide/step_libraries">Step Libraries</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/guide/page_elements">Serenity Page Elements</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Serenity Step Libraries</h1></header><p>In Serenity, tests are broken down into reusable steps. An important principle behind Serenity is the idea that it is easier to maintain a test that uses several layers of abstraction to hide the complexity behind different parts of a test.</p><p>In an automated acceptance test, test steps represent the level of abstraction between the code that interacts with your application (for example, Page Component Objects in an automated web test, which model parts of the user interface, or API endpoints for web services you need to interact with) and higher-level stories (sequences of more business-focused actions that illustrate how a given user story has been implemented). If your automated test is not UI-oriented (for example, if it calls a web service), steps orchestrate other more technical components such as REST clients. Steps can contain other steps, and are included in the Serenity reports. Whenever a UI step is executed, a screenshot is stored and displayed in the report.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="breaking-down-tests-into-steps"></a>Breaking down tests into steps<a class="hash-link" href="#breaking-down-tests-into-steps" title="Direct link to heading">#</a></h2><p>Suppose we are testing a Frequent Flyer programme, and need to illustrate the following business rules:</p><ul><li>Members should start with Bronze status</li><li>Members should earn Silver status after flying 10,000 km.</li></ul><p>Each of these can be broken down further into business tasks and verifications. For example, the first rule could be broken into two steps:</p><ul><li>Create a new Frequent Flyer member</li><li>Check that the member has a status of Bronze</li></ul><p>And the second can be broken into three steps:</p><ul><li>Create a new Frequent Flyer member</li><li>Make the member fly 10000 km</li><li>Check that the member has a status of Silver</li></ul><p>We could express these tests using Serenity in JUnit as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">package flyer;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.junit.runners.SerenityRunner;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.thucydides.core.annotations.Steps;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.junit.Test;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.junit.runner.RunWith;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import flyer.steps.TravellerEarningStatusPoints;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static flyer.Status.Bronze;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static flyer.Status.Silver;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/// [classbody]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@ExtendWith(SerenityJUnit5Extension.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WhenEarningFrequentFlyerStatus {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Steps</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    TravellerEarningStatusPoints tracy;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void members_should_start_with_Bronze_status() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // GIVEN</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        tracy.joins_the_frequent_flyer_program();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // THEN</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        tracy.should_have_a_status_of(Bronze);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void earn_silver_after_10000_kilometers() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // GIVEN</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        tracy.joins_the_frequent_flyer_program();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // WHEN</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        tracy.flies(10000);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // THEN</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        tracy.should_have_a_status_of(Silver);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Notice how the second test reuses step methods used in the first to perform a slightly different test. This is a typical example of the way we reuse steps in similar tests, in order to avoid duplicated code and make the code easier to maintain.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="implementing-step-libraries"></a>Implementing Step Libraries<a class="hash-link" href="#implementing-step-libraries" title="Direct link to heading">#</a></h2><p>The <code>TravellerEarningStatusPoints</code> class is what we call a step library. We use the <code>@Steps</code> class as shown above to indicate a step library in our test code: this annotation tells Serenity to instantiate and instrument this field, so that methods you call in this library also appear in the test reports, just like in the one you can see here:</p><p>earn silver after 10000 km
Step libraries contain the business tasks or actions that a user performs during a test. There are many ways to organise your step libraries, but a convenient way is to group methods in slices of business behaviour for a given type of user. In this case a traveller who is earning status points.</p><p>Notice that it was not necessary to explicitly instantiate the Steps class TravellerEarningStatusPoints. When you annotated a member variable of this class with the @Steps annotation, Serenity BDD will automatically instantiate it for you.</p><p>You should never create instances of step libraries using the new keyword, as Serenity will not be able to instrument the step library correctly, and the methods called will not appear in the reports.</p><p>Step methods are annotated with the @Step annotation:</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/serenity-bdd/documentation/docs/guide/steps.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/documentation/docs/guide/maven"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Using Maven with Serenity</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/documentation/docs/guide/page_elements"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Serenity Page Elements Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#breaking-down-tests-into-steps" class="table-of-contents__link">Breaking down tests into steps</a></li><li><a href="#implementing-step-libraries" class="table-of-contents__link">Implementing Step Libraries</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation/docs/tutorials/first_test">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://gitter.im/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/serenity-bdd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn Serenity BDD</div><ul class="footer__items"><li class="footer__item"><a href="http://expansion.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>The Serenity Dojo Training Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.serenity-dojo.com/apply" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Personalised Serenity BDD Coaching<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Serenity Dojo Ltd.</div></div></div></footer></div>
<script src="/documentation/assets/js/runtime~main.0edd7ce0.js"></script>
<script src="/documentation/assets/js/main.76333997.js"></script>
</body>
</html>