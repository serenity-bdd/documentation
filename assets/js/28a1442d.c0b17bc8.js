"use strict";(self.webpackChunkserenity_users_guide=self.webpackChunkserenity_users_guide||[]).push([[7258],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),u=c(a),m=l,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return a?n.createElement(h,o(o({ref:t},p),{},{components:a})):n.createElement(h,o({ref:t},p))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,o=new Array(i);o[0]=u;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:l,o[1]=r;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},8263:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>s});var n=a(7462),l=(a(7294),a(3905));const i={id:"screenplay_webdriver",sidebar_position:2},o="Web Testing with Serenity Screenplay",r={unversionedId:"screenplay/screenplay_webdriver",id:"screenplay/screenplay_webdriver",isDocsHomePage:!1,title:"Web Testing with Serenity Screenplay",description:"Introduction",source:"@site/docs/screenplay/screenplay-webdriver.md",sourceDirName:"screenplay",slug:"/screenplay/screenplay_webdriver",permalink:"/docs/screenplay/screenplay_webdriver",editUrl:"https://github.com/serenity-bdd/documentation/docs/screenplay/screenplay-webdriver.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"screenplay_webdriver",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Screenplay Fundamentals",permalink:"/docs/screenplay/screenplay_fundamentals"},next:{title:"Working with REST APIs using Serenity Screenplay",permalink:"/docs/screenplay/screenplay_rest"}},s=[{value:"Introduction",id:"introduction",children:[]},{value:"Opening a URL",id:"opening-a-url",children:[{value:"Opening a URL directly",id:"opening-a-url-directly",children:[]},{value:"Opening the URL of a Page Object",id:"opening-the-url-of-a-page-object",children:[]},{value:"Using named pages",id:"using-named-pages",children:[]}]},{value:"Locating elements on a page",id:"locating-elements-on-a-page",children:[{value:"CSS and XPath",id:"css-and-xpath",children:[]},{value:"Using Selenium locators",id:"using-selenium-locators",children:[]},{value:"Using the Target class",id:"using-the-target-class",children:[]},{value:"Using dynamic targets",id:"using-dynamic-targets",children:[]},{value:"Using Page Elements",id:"using-page-elements",children:[]}]},{value:"Interacting with elements",id:"interacting-with-elements",children:[{value:"Screenplay Interaction classes",id:"screenplay-interaction-classes",children:[]},{value:"Clear",id:"clear",children:[]},{value:"Click",id:"click",children:[]},{value:"DoubleClick",id:"doubleclick",children:[]},{value:"Enter and SendKeys",id:"enter-and-sendkeys",children:[]},{value:"Evaluate a Javascript expression",id:"evaluate-a-javascript-expression",children:[]},{value:"Hit a particular key",id:"hit-a-particular-key",children:[]},{value:"Working with checkboxes",id:"working-with-checkboxes",children:[]},{value:"JavaScriptClick",id:"javascriptclick",children:[]},{value:"Moving the mouse",id:"moving-the-mouse",children:[]},{value:"Performing actions on collections of elements",id:"performing-actions-on-collections-of-elements",children:[]},{value:"RightClick",id:"rightclick",children:[]},{value:"Scrolling elements into view",id:"scrolling-elements-into-view",children:[]},{value:"Selecting from dropdowns",id:"selecting-from-dropdowns",children:[]},{value:"Switching to another window or frame",id:"switching-to-another-window-or-frame",children:[]},{value:"Dealing with Alert dialogs",id:"dealing-with-alert-dialogs",children:[]},{value:"Upload",id:"upload",children:[]}]},{value:"Working with Chrome DevTools",id:"working-with-chrome-devtools",children:[]},{value:"Querying the web page",id:"querying-the-web-page",children:[]},{value:"Bundled WebDriver Questions",id:"bundled-webdriver-questions",children:[{value:"Absence",id:"absence",children:[]},{value:"Attribute",id:"attribute",children:[]},{value:"CheckboxValue",id:"checkboxvalue",children:[]},{value:"CSSValue",id:"cssvalue",children:[]},{value:"CurrentlyEnabled",id:"currentlyenabled",children:[]},{value:"CurrentVisibility",id:"currentvisibility",children:[]},{value:"Disabled",id:"disabled",children:[]},{value:"Displayed",id:"displayed",children:[]},{value:"Enabled",id:"enabled",children:[]},{value:"Presence",id:"presence",children:[]},{value:"SelectedStatus",id:"selectedstatus",children:[]},{value:"TextContent",id:"textcontent",children:[]},{value:"TheCoordinates",id:"thecoordinates",children:[]},{value:"TheLocation",id:"thelocation",children:[]},{value:"TheSize",id:"thesize",children:[]},{value:"Value",id:"value",children:[]},{value:"Visibility",id:"visibility",children:[]},{value:"Working with Dropdowns",id:"working-with-dropdowns",children:[]}]},{value:"Handling Waits",id:"handling-waits",children:[{value:"Using the WaitUntil class",id:"using-the-waituntil-class",children:[]},{value:"Waiting for a WebDriver condition",id:"waiting-for-a-webdriver-condition",children:[]},{value:"Waiting for Targets",id:"waiting-for-targets",children:[]}]}],c={toc:s};function p(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"web-testing-with-serenity-screenplay"},"Web Testing with Serenity Screenplay"),(0,l.kt)("h2",{id:"introduction"},"Introduction"),(0,l.kt)("p",null,"Web tests are a common use case for Screenplay scenarios, where we try to model user behaviour and interactions with the system. In this section, we will learn how to interact with a web application using the Screenplay WebDriver integration."),(0,l.kt)("h2",{id:"opening-a-url"},"Opening a URL"),(0,l.kt)("h3",{id:"opening-a-url-directly"},"Opening a URL directly"),(0,l.kt)("p",null,"In Screenplay, you open a new page using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Open")," interaction class. This can work with a URL, e.g:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'toby.attemptsTo(Open.url("https://todomvc.com/examples/angularjs/#/"));\n')),(0,l.kt)("h3",{id:"opening-the-url-of-a-page-object"},"Opening the URL of a Page Object"),(0,l.kt)("p",null,"If you have defined a Page Object with a default url, you can open a page object by referring to the page object class. Suppose we have defined the following Serenity Page Object, and set the ",(0,l.kt)("inlineCode",{parentName:"p"},"@DefaultUrl")," value to the TodoMVC application URL:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@DefaultUrl("https://todomvc.com/examples/angularjs/#/")\npublic class TodoMvcPage extends PageObject {}\n')),(0,l.kt)("p",null,"We can now open this page using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Open.browserOn()")," method, like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"toby.attemptsTo(Open.browserOn().the(TodoMvcPage.class));\n")),(0,l.kt)("h3",{id:"using-named-pages"},"Using named pages"),(0,l.kt)("p",null,"Sometimes it can be convenient to store the URLs for different environments or servers in the ",(0,l.kt)("inlineCode",{parentName:"p"},"serenity.conf")," file, and refer to them by the name of the property in our test code. "),(0,l.kt)("p",null,"For example, imagine we wanted to run our tests against the Angular, React and Polymer implementations of the TodoMVC app. Each application has a different URL, that we could store in the ",(0,l.kt)("inlineCode",{parentName:"p"},"serenity.conf")," file like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'pages {\n    angular = "https://todomvc.com/examples/angularjs/#/"\n    react = "https://todomvc.com/examples/react/#/"\n    polymer = "https://todomvc.com/examples/polymer/index.html"\n}\n')),(0,l.kt)("p",null,"Next, we can refer to these properties in our code using the ",(0,l.kt)("inlineCode",{parentName:"p"},"thePageNamed()")," method, like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'toby.attemptsTo(Open.browserOn().thePageNamed("pages.react"));\n')),(0,l.kt)("h2",{id:"locating-elements-on-a-page"},"Locating elements on a page"),(0,l.kt)("p",null,"In Screenplay, you can use several different strategies to locate the elements you need to interact with. "),(0,l.kt)("h3",{id:"css-and-xpath"},"CSS and XPath"),(0,l.kt)("p",null,"The simplest way to locate an element is to use a CSS or XPath expression, as shown here:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'toby.attemptsTo(\n    Click.on("#login-button")\n);\n')),(0,l.kt)("p",null,"Or"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"toby.attemptsTo(\n    Click.on(\"//input[@id='login-button']\")\n);\n")),(0,l.kt)("p",null,'Serenity will interpret the string to determine whether it is an XPath or CSS expression. In some cases there may be some ambiguity, and Serenity will default to XPath. If this is not intended, you can use the "xpath:" or "css:" prefixes to specify which type of locator you mean:'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'toby.attemptsTo(\n    Click.on("css:input[name=login-button]")\n);\n')),(0,l.kt)("h3",{id:"using-selenium-locators"},"Using Selenium locators"),(0,l.kt)("p",null,"You can also use any of the standard Selenium locator (",(0,l.kt)("inlineCode",{parentName:"p"},"org.openqa.selenium.By"),") classes, as shown here:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'toby.attemptsTo(\n    Click.on(By.id("login-button"))\n);\n')),(0,l.kt)("h3",{id:"using-the-target-class"},"Using the Target class"),(0,l.kt)("p",null,"Using text or ",(0,l.kt)("inlineCode",{parentName:"p"},"By")," locators has the advantage of being concise, but it can lead to poorly readable test reports, especially when complex or non-meaningful XPath or CSS locators are used. In Screenplay, the ",(0,l.kt)("inlineCode",{parentName:"p"},"Target")," class allows us to give a locator strategy a more meaningful name. For example, consider the following code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"toby.attemptsTo(Click.on(\"//button[.='Add']\"));\n")),(0,l.kt)("p",null,'In the Serenity reports, this step will be reported as "Toby clicks on //button',"[.='Add']",'", which is not very readable. '),(0,l.kt)("p",null,"If we represent this button using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Target"),' class, we can associate a label such as "Add to cart button", like this:'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'Target ADD_TO_CART = Target.the("Add to cart button").located(By.cssSelector("//button[.=\'Add\']"));\n\ntoby.attemptsTo(Click.on(ADD_TO_CART));\n')),(0,l.kt)("p",null,'In the reports, this step will now appear as "Toby clicks on Add to cart button".'),(0,l.kt)("h3",{id:"using-dynamic-targets"},"Using dynamic targets"),(0,l.kt)("p",null,"You can also include variables into a ",(0,l.kt)("inlineCode",{parentName:"p"},"Target"),' locator, to make your locators dynamic. You can include numbered paramaters using "{0}", "{1}", etc, and then use the ',(0,l.kt)("inlineCode",{parentName:"p"},"of()")," method to instantiate the `Target with the value you are interested in. For example, we could create a generic locator for a button containing a given text like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"Target BUTTON_WITH_LABEL = Target.the(\"{0} button\").located(By.cssSelector(\"//button[.='{0}']\"));\n\ntoby.attemptsTo(Click.on(BUTTON_WITH_LABEL.of('Add')));\n")),(0,l.kt)("p",null,"We could even use this dynamic target to define other targets with specific values, like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"Target BUTTON_WITH_LABEL = Target.the(\"{0} button\").located(By.cssSelector(\"//button[.='{0}']\"));\nTarget ADD_BUTTON = BUTTON_WITH_LABEL.of('Add');\n\ntoby.attemptsTo(Click.on(ADD_BUTTON));\n")),(0,l.kt)("h3",{id:"using-page-elements"},"Using Page Elements"),(0,l.kt)("p",null,"Serenity ",(0,l.kt)("a",{parentName:"p",href:"../../docs/guide/page_elements"},"Page Elements")," provide a more intuitive and readable way to locate elements on a page, often without needing to use XPath or CSS. With Page Elements, you can identify elements using expressions such as the following"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'Click.on(Button.withText("Add to cart"))')),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'Enter.theValue(").into(InputField.withPlaceholder("Enter the customer name"))')),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'Click.on(PageElement.locatedBy(".item").containingText("Bananas"))'))),(0,l.kt)("p",null,"You can learn more about Page Elements ",(0,l.kt)("a",{parentName:"p",href:"../../docs/guide/page_elements"},"here"),"."),(0,l.kt)("h2",{id:"interacting-with-elements"},"Interacting with elements"),(0,l.kt)("p",null,"In this section we will see how to interact with elements on a web page using Selenium WebDriver with Serenity Screenplay."),(0,l.kt)("h3",{id:"screenplay-interaction-classes"},"Screenplay Interaction classes"),(0,l.kt)("p",null,"You can find the standard Serenity interaction classes in the ",(0,l.kt)("inlineCode",{parentName:"p"},"net.serenitybdd.screenplay.actions")," package."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Interaction"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"),(0,l.kt)("th",{parentName:"tr",align:null},"Example"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Clear"),(0,l.kt)("td",{parentName:"tr",align:null},"Clear an input field"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Clear.field("#firstname"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Click"),(0,l.kt)("td",{parentName:"tr",align:null},"Click on an element"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Click.on("#add-to-cart"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DoubleClick"),(0,l.kt)("td",{parentName:"tr",align:null},"Double-click on an element using a Selenium Action"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(DoubleClick.on("#add-to-cart"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Enter"),(0,l.kt)("td",{parentName:"tr",align:null},"Type a value into an input field"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Enter.theValue("scott").into("#username"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Evaluate"),(0,l.kt)("td",{parentName:"tr",align:null},"Evaluate a Javascript expression"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Evaluate.javascript("window.localStorage.clear();")'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Hit"),(0,l.kt)("td",{parentName:"tr",align:null},"Press a key"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Hit.the(Keys.ENTER).into("#searchterms"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JavaScriptClick"),(0,l.kt)("td",{parentName:"tr",align:null},"Click on an element using Javascript rather than Selenium"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(JavaScriptClick.on("#add-to-cart"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"MoveMouse"),(0,l.kt)("td",{parentName:"tr",align:null},"Move the mouse over a specified element"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(MoveMouse.to("#main-menu"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Open"),(0,l.kt)("td",{parentName:"tr",align:null},"Open a specific URL or page"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Open.url("https://www.google.com"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"PerformOn"),(0,l.kt)("td",{parentName:"tr",align:null},"Perform one or more actions on several elements"),(0,l.kt)("td",{parentName:"tr",align:null},"See below")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"RightClick"),(0,l.kt)("td",{parentName:"tr",align:null},"Right-click on a given element"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(RightClick.on("#menu"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Scroll"),(0,l.kt)("td",{parentName:"tr",align:null},"Scroll to an element using Javascript"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Scroll.to("#terms-and-conditions"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SelectFromOptions"),(0,l.kt)("td",{parentName:"tr",align:null},"Select a value in an HTML dropdown"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(SelectFromOptions.byVisibleText("Red").from("#color"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SendKeys"),(0,l.kt)("td",{parentName:"tr",align:null},"Enter a value into a field using the Selenium sendKeys() method"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(SendKeys.of("scott").into("#username"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SetCheckbox"),(0,l.kt)("td",{parentName:"tr",align:null},"Check a checkbox field"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(SetCheckbox.of("#subscribe-to-newsletter").toTrue())'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Switch"),(0,l.kt)("td",{parentName:"tr",align:null},"Switch to another window or tab"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"actor.attemptsTo(Switch.toNewWindow())"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Upload"),(0,l.kt)("td",{parentName:"tr",align:null},"Upload a file using an HTML upload field"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'actor.attemptsTo(Upload.theFile(pathToFile)).to("#uploaded-file"))'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"WithDevTools"),(0,l.kt)("td",{parentName:"tr",align:null},"Perform an action with the Chrome DevTools"),(0,l.kt)("td",{parentName:"tr",align:null},"See below")))),(0,l.kt)("p",null,"The more important interactions are described in more detail in the following sections."),(0,l.kt)("h3",{id:"clear"},"Clear"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"Clear")," interaction resets the value of an HTML form element."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Clear.field(By.id("first-name")));\n')),(0,l.kt)("h3",{id:"click"},"Click"),(0,l.kt)("p",null,"Click on a button or element."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Click.on("#some-button"));\n')),(0,l.kt)("p",null,"Sometimes an element is not in an interactable state when we first attempt to click on it. For example, it may be disabled, or not yet visible on the page. In these cases, we can ask Serenity to wait for the element to be enabled using the ",(0,l.kt)("inlineCode",{parentName:"p"},"afterWaitingUntilEnabled()")," method:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Click.on("#some-button").afterWaitingUntilEnabled());\n')),(0,l.kt)("p",null,"If the element is not yet rendered, we can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"afterWaitingUntilPresent()")," method:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Click.on("#some-button").afterWaitingUntilPresent());\n')),(0,l.kt)("p",null,"In both these cases, Serenity will wait for up to 5 seconds by default for the element to be present or available. You can configure this timeout using the ",(0,l.kt)("inlineCode",{parentName:"p"},"webdriver.wait.for.timeout")," system property (defined in milliseconds)."),(0,l.kt)("h3",{id:"doubleclick"},"DoubleClick"),(0,l.kt)("p",null,"Double-click on a button or element, using Selenium Actions."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(DoubleClick.on("#some-button"));\n')),(0,l.kt)("h3",{id:"enter-and-sendkeys"},"Enter and SendKeys"),(0,l.kt)("p",null,"There are two ways to enter a value into a field. "),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Enter")," will enter a value into a field, first waiting until the field is enabled, and then clearing the field of any current values, before entering the specified value."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Enter.theValue("Sarah-Jane").into("#firstName"));\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"SendKeys")," will perform the equivalent of Selenium ",(0,l.kt)("inlineCode",{parentName:"p"},"sendKeys()"),", you can use ",(0,l.kt)("inlineCode",{parentName:"p"},"Enter.keyValue()")," instead of ",(0,l.kt)("inlineCode",{parentName:"p"},"Enter.theValue()")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(SendKeys.of("Sarah-Jane").into("#firstName"));\n')),(0,l.kt)("h3",{id:"evaluate-a-javascript-expression"},"Evaluate a Javascript expression"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"Evaluate")," task executes a JavaScript command in the context of the currently selected frame or window. For example, the following code will clear the local storage in Dina's browser:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'dina.attemptsTo(Evaluate.javascript("window.localStorage.clear()"));\n')),(0,l.kt)("p",null,"If the script has a return value (i.e. if the script contains a return statement), you can also retrieve the value returned by a Javascript expression. You can do this in two ways. The first is to use the ",(0,l.kt)("inlineCode",{parentName:"p"},"result()")," method to turn the ",(0,l.kt)("inlineCode",{parentName:"p"},"Evaluate")," action into a question. You can see an example here:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        Long result = (Long) dina.asksFor(Evaluate.javascript("return 1 + 1").result());\n        assertThat(result).isEqualTo(2);\n')),(0,l.kt)("p",null,"The type of the object returned by WebDriver is as follows: "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"For an HTML element, this method returns a ",(0,l.kt)("inlineCode",{parentName:"li"},"WebElement")),(0,l.kt)("li",{parentName:"ul"},"For a decimal, a ",(0,l.kt)("inlineCode",{parentName:"li"},"Double")," is returned"),(0,l.kt)("li",{parentName:"ul"},"For a non-decimal number, a ",(0,l.kt)("inlineCode",{parentName:"li"},"Long")," is returned"),(0,l.kt)("li",{parentName:"ul"},"For a boolean, a ",(0,l.kt)("inlineCode",{parentName:"li"},"Boolean")," is returned"),(0,l.kt)("li",{parentName:"ul"},"For all other cases, a ",(0,l.kt)("inlineCode",{parentName:"li"},"String")," is returned."),(0,l.kt)("li",{parentName:"ul"},"For an array, return a ",(0,l.kt)("inlineCode",{parentName:"li"},"List<Object>")," with each object following the rules above. We support nested lists."),(0,l.kt)("li",{parentName:"ul"},"For a map, return a ",(0,l.kt)("inlineCode",{parentName:"li"},"Map<String, Object>")," with values following the rules above.")),(0,l.kt)("h3",{id:"hit-a-particular-key"},"Hit a particular key"),(0,l.kt)("p",null,"You can enter any Selenium key or key-combination using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Enter")," task. You may also want to use the ",(0,l.kt)("inlineCode",{parentName:"p"},"Hit")," task for more readability. The ",(0,l.kt)("inlineCode",{parentName:"p"},"Hit")," interaction class is similar to the ",(0,l.kt)("inlineCode",{parentName:"p"},"Enter")," class, but takes a list of one or more ",(0,l.kt)("inlineCode",{parentName:"p"},"Keys")," values:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Enter.theValue("Sarah-Jane").into(By.id("firstName")));\n        dina.attemptsTo(Hit.the(Keys.TAB).into(By.id("firstName")));\n')),(0,l.kt)("h3",{id:"working-with-checkboxes"},"Working with checkboxes"),(0,l.kt)("p",null,"You can check or uncheck a checkbox element by clicking on it using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Click")," interaction. If you want to be sure that that the element is checked or unchecked, you can also use the ",(0,l.kt)("inlineCode",{parentName:"p"},"SetCheckbox")," class, to either check or uncheck the field."),(0,l.kt)("p",null,"For example, to check the Terms & Conditions checkbox on a form, you might use the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(SetCheckbox.of("#terms-and-conditions").toTrue());\n')),(0,l.kt)("p",null,"And to uncheck it, you could do this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(SetCheckbox.of("#terms-and-conditions").toFalse());\n')),(0,l.kt)("p",null,"Since enabling and disabling checkboxes involves clicking, we can also use the ",(0,l.kt)("inlineCode",{parentName:"p"},"afterWaitingUntilEnabled()")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"afterWaitingUntilPresent()")," methods available with the ",(0,l.kt)("inlineCode",{parentName:"p"},"Click")," interaction class, e.g."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(\n            SetCheckbox.of("#terms-and-conditions").toFalse()\n                                                   .afterWaitingUntilEnabled());\n')),(0,l.kt)("h3",{id:"javascriptclick"},"JavaScriptClick"),(0,l.kt)("p",null,"Sometimes it is useful to be able to bypass Selenium and perform a click() directly with JavaScript. We can do this with the ",(0,l.kt)("inlineCode",{parentName:"p"},"JavaScriptClick")," class. The class has the same API as the ",(0,l.kt)("inlineCode",{parentName:"p"},"Click")," class, e.g."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(JavaScriptClick.on("#button"));\n')),(0,l.kt)("h3",{id:"moving-the-mouse"},"Moving the mouse"),(0,l.kt)("p",null,"We can move the mouse to an element on the page using ",(0,l.kt)("inlineCode",{parentName:"p"},"MoveMouse"),", e.g."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(MoveMouse.to("#button"));\n')),(0,l.kt)("p",null,"If we need to perform one or more actions on the element once we have moved the cursor over it, we can do that using the ",(0,l.kt)("inlineCode",{parentName:"p"},"andThen()")," method with a Lambda expression, which is passed the Actions object. For example, to click on the button after moving the cursor to it, we could do the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"        dina.attemptsTo(MoveMouse.to(BUTTON).andThen(actions -> actions.click()));\n")),(0,l.kt)("h3",{id:"performing-actions-on-collections-of-elements"},"Performing actions on collections of elements"),(0,l.kt)("p",null,"We can also perform actions on a collection of elements. Suppose we have an HTML page containing a list of checkboxes like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'    <div>\n        <label>Condiments:</label>\n        Salt <input type="checkbox" id="salt" class="condiment" name="salt">\n        Pepper <input type="checkbox" id="pepper" class="condiment" name="pepper">\n        Sauce <input type="checkbox" id="sause" class="condiment" name="sauce">\n    </div>\n')),(0,l.kt)("p",null,"We could check each of these checkboxes in one go by using the ",(0,l.kt)("inlineCode",{parentName:"p"},"PerformOn.eachMatching()")," method. This takes two parameters:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A locator (a Target, ",(0,l.kt)("inlineCode",{parentName:"li"},"By")," locator, or CSS or XPath expression)"),(0,l.kt)("li",{parentName:"ul"},"A lambda expression that accepts a ",(0,l.kt)("inlineCode",{parentName:"li"},"WebElementFacade"))),(0,l.kt)("p",null,"If we wanted to click on each of these checkboxes, we could do the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'         dina.attemptsTo(\n            PerformOn.eachMatching(".condiment", WebElementFacade::click)\n        );\n')),(0,l.kt)("p",null,"You can also use Screenplay performables, as shown in this example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(\n            PerformOn.eachMatching(".condiment", \n                checkbox -> dina.attemptsTo(SetCheckbox.of(checkbox).toTrue()))\n        );\n')),(0,l.kt)("h3",{id:"rightclick"},"RightClick"),(0,l.kt)("p",null,"You can right-click on an element using the ",(0,l.kt)("inlineCode",{parentName:"p"},"RightClick")," class. This will use the Selenium ",(0,l.kt)("inlineCode",{parentName:"p"},"contextClick()")," action method:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(RightClick.on("#button"));\n')),(0,l.kt)("h3",{id:"scrolling-elements-into-view"},"Scrolling elements into view"),(0,l.kt)("p",null,"Sometimes it can be useful to scroll to a specific element on the page. You can do this with the ",(0,l.kt)("inlineCode",{parentName:"p"},"Scroll")," class, like this, which uses Javascript to scroll the element into view."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Scroll.to(By.id("#button")));\n')),(0,l.kt)("p",null,"This class uses the Javascript ",(0,l.kt)("inlineCode",{parentName:"p"},"scrollIntoView()")," method, which by default will scroll the screen so that the top of the element will be aligned to the top of the visible area of the scrollable ancestor. You can also align the bottom of the element to the bottom of the visible area of the scrollable ancestor, using the ",(0,l.kt)("inlineCode",{parentName:"p"},"andAlignToBottom()")," method, e.g."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(Scroll.to(By.id("#button")).andAlignToBottom());\n')),(0,l.kt)("h3",{id:"selecting-from-dropdowns"},"Selecting from dropdowns"),(0,l.kt)("p",null,"We can select a value from a dropdown using the ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectFromOptions")," class. Suppose we have the following HTML code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'        <select id="color">\n            <option value="red">Red</option>\n            <option value="green">Green</option>\n            <option value="blue">Blue</option>\n        </select>\n')),(0,l.kt)("p",null,"We can select the second of these options in any of the following ways:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    dina.attemptsTo(SelectFromOptions.byVisibleText("Green").from("#color"));\n    dina.attemptsTo(SelectFromOptions.byValue("green").from("#color"));\n    dina.attemptsTo(SelectFromOptions.byIndex(1).from("#color"));\n')),(0,l.kt)("p",null,"We can retrieve the current value of a dropdown list using the ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedValue")," Question class, e.g."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    String selectedValue = dina.asksFor(SelectedValue.of(COLOR_"#color")));\n')),(0,l.kt)("h3",{id:"switching-to-another-window-or-frame"},"Switching to another window or frame"),(0,l.kt)("p",null,"We can switch to a new window or tab using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Switch")," class. For example, the following code opens a link in a new tab and switches control to this tab:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(\n                Click.on("#link-that-opens-a-new-tab"),\n                Switch.toNewWindow()\n        );\n')),(0,l.kt)("p",null,"If there are only two windows or tabs open, we can switch back to the original window by using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Switch.toTheOtherWindow()")," method:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"        dina.attemptsTo(\n                Switch.toTheOtherWindow()\n        );\n")),(0,l.kt)("p",null,"Another option is to use the name or handle of the window you want to switch to, using ",(0,l.kt)("inlineCode",{parentName:"p"},"Switch.toWindow()"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"        dina.attemptsTo(\n                Switch.toWindow(originalWindowHandle)\n        );\n")),(0,l.kt)("p",null,"Alternatively, if you know the title of the window or tab, you can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"Switch.toWindowTitled()")," method:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(\n                Switch.toWindowTitled("The other window")\n        );\n')),(0,l.kt)("p",null,"Although HTML frames are considered obsolete for modern applications, they are still around in some older applications. You can interact with frames using the following methods:"),(0,l.kt)("p",null,"Other Selenium switch functions are handled by the following methods:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Interaction"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"),(0,l.kt)("th",{parentName:"tr",align:null},"Selenium equivalent"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Switch.toFrame(index)"),(0,l.kt)("td",{parentName:"tr",align:null},"Select a frame by its (zero-based) index. Selecting a frame by index is equivalent to the JS expression window.frames","[index]",' where "window" is the DOM window represented by the current context. Once the frame has been selected, all subsequent calls on the WebDriver interface are made to that frame.'),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"driver.switch().toFrame(index)"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Switch.toFrame(nameOrId)"),(0,l.kt)("td",{parentName:"tr",align:null},"Select a frame by its name or ID. Frames located by matching name attributes are always given precedence over those matched by ID."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"driver.switch().toFrame(nameOrId)"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Switch.toParentFrame()"),(0,l.kt)("td",{parentName:"tr",align:null},"Change focus to the parent context. If the current context is the top level browsing context, the context remains unchanged."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"driver.switchTo().parentFrame()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Switch.toDefaultContext()"),(0,l.kt)("td",{parentName:"tr",align:null},"Selects either the first frame on the page, or the main document when a page contains iframes."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"driver.switch().toDefaultContext()"))))),(0,l.kt)("p",null,"Other Selenium switch functions are handled by the following methods:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Interaction"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"),(0,l.kt)("th",{parentName:"tr",align:null},"Selenium equivalent"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Switch.toActiveElement()"),(0,l.kt)("td",{parentName:"tr",align:null},'Switches to the element that currently has focus within the document currently "switched to", or the body element if this cannot be detected. This matches the semantics of calling "document.activeElement" in Javascript.'),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"driver.switchTo().activeElement()"))))),(0,l.kt)("h3",{id:"dealing-with-alert-dialogs"},"Dealing with Alert dialogs"),(0,l.kt)("p",null,"We can work with HTML Alert dialogs using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Switch.toAlert()")," method. For example, the following code will switch the current window to the current alert dialog:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"        dina.attemptsTo(\n                Switch.toAlert()\n        );\n")),(0,l.kt)("p",null,"We can query the text of the alert using the ",(0,l.kt)("inlineCode",{parentName:"p"},"HtmlAlert.text()")," Question class:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'        dina.attemptsTo(\n                Switch.toAlert()\n        );\n        assertThat(dina.asksFor(HtmlAlert.text())).isEqualTo("Are you sure?");\n')),(0,l.kt)("p",null,"We can also accept or dismiss the alert message using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Switch.toAlert().andAccept()")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"Switch.toAlert().andDismiss()")," methods respectively:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"        dina.attemptsTo(\n                Switch.toAlert().andAccept()\n        );\n")),(0,l.kt)("h3",{id:"upload"},"Upload"),(0,l.kt)("p",null,"The simplest way to upload a file to an HTML upload field (one that has a type of 'file') is to use the ",(0,l.kt)("inlineCode",{parentName:"p"},"Upload")," task. Suppose we have the following HTML form field:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'        <input type="file" id="upload-file" name="filename">\n')),(0,l.kt)("p",null,"We can upload a file to this field as shown here:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    Path fileToUpload = ...\n    dina.attemptsTo(Upload.theFile(fileToUpload).to("#upload-file"));\n')),(0,l.kt)("p",null,"If you are running the tests on a remote machine, you can use the Selenium Local File Detector. The Local File Detector allows the transfer of files from the client machine to the remote server. For example, if a test needs to upload a file to a web application, a remote WebDriver can automatically transfer the file from the local machine to the remote web server during runtime. This allows the file to be uploaded from the remote machine running the test."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    Path fileToUpload = ...\n    dina.attemptsTo(Upload.theFile(fileToUpload).to("#upload-file").usingLocalFileDetector());\n')),(0,l.kt)("p",null,"You can also upload a file on the classpath resources using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Upload.theClasspathResource()")," method, as shown here:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    Path fileToUpload = ...\n    dina.attemptsTo(Upload.theClasspathResource("some/resource/path.txt").to("#upload-file"));\n')),(0,l.kt)("h2",{id:"working-with-chrome-devtools"},"Working with Chrome DevTools"),(0,l.kt)("p",null,'Many browsers provide "DevTools" \u2013 a set of tools that are integrated with the browser that developers can use to debug web apps and explore the performance of their pages. Google Chrome\u2019s DevTools make use of a protocol called the Chrome DevTools Protocol (or \u201cCDP\u201d for short). As the name suggests, this is not designed for testing, nor to have a stable API, so functionality is highly dependent on the version of the browser.'),(0,l.kt)("p",null,"In Serenity Screenplay, we can access the Selenium 4 DevTools library using the ",(0,l.kt)("inlineCode",{parentName:"p"},"WithDevTools.perform()")," method. For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"        final List<Metric> metricList = new ArrayList<>();\n\n        dina.attemptsTo(\n                WithDevTools.perform(\n                        devTools -> {\n                            devTools.createSession();\n                            devTools.send(Performance.enable(Optional.empty()));\n                            metricList.addAll(devTools.send(Performance.getMetrics()));\n                        }\n                )\n        );\n")),(0,l.kt)("p",null,"If we want to use DevTools to retrieve a specific value, we can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"DevToolsQuery")," class:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"        List<Metric> metrics = dina.asksFor(\n                DevToolsQuery.ask().about(devTools -> {\n                    devTools.createSession();\n                    devTools.send(Performance.enable(Optional.empty()));\n                    return devTools.send(Performance.getMetrics());\n                })\n        );\n")),(0,l.kt)("h2",{id:"querying-the-web-page"},"Querying the web page"),(0,l.kt)("p",null,"Serenity Screenplay also gives you a large number of options when it comes to querying a web UI. Most involve special types of Question class."),(0,l.kt)("p",null,'In Screenplay web tests, you can simply implement a question which returns the object type you are interested, and then query the UI in a conventional Webdriver way. For example, suppose we want to read the user name on a page, which can be located with the ".user-name" CSS selector.'),(0,l.kt)("p",null,"Screenplay assertion to check the user name might look like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    sam.should(seeThat(TheUserName.value(), equalTo("sam")));\n')),(0,l.kt)("p",null,"We could create a TheUserName question class to query this field as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Subject("the displayed username")\npublic class TheUserName implements Question<String> {\n    @Override\n    public String answeredBy(Actor actor) {\n        return BrowseTheWeb.as(actor).findBy(".user-name").getText();\n    }\n\n    public static Question<String> value() { return new TheUserName(); }\n}\n')),(0,l.kt)("p",null,"Here we use BrowseTheWeb.as(actor) to get the Serenity WebDriver API for the actor\u2019s webdriver instance, which gives access to the full range of Serenity Page Object methods."),(0,l.kt)("p",null,"We could also use a Target to locate the user name, which we could store in a separate Page Component class:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public static Target USER_NAME = Target.the("User name").locatedBy(".user-name");\n')),(0,l.kt)("p",null,"We can then use the resolveFor() method to find the element matching that target in the actor\u2019s browser:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Subject("the displayed username")\npublic class TheUserName implements Question<String> {\n\n    @Override\n    public String answeredBy(Actor actor) {\n        return USER_NAME.resolveFor(actor).getText();\n    }\n\n    public static Question<String> value() { return new TheUserName(); }\n}\n')),(0,l.kt)("p",null,"Alternatively, we could write this class as a factory, and use a lambda expression instead of a fully blown Question class:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public class TheUserName {\n\n    public static Question<String> value() {\n        return actor -> USER_NAME.resolveFor(actor).getText();\n    }\n}\n")),(0,l.kt)("p",null,"In this case, the ",(0,l.kt)("inlineCode",{parentName:"p"},"@Subject")," annotation will have no effect, so we need to pass in the name of the object we are checking in the Screenplay assertion:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'sam.should(seeThat("the displayed username", TheUserName.value(), equalTo("sam")));\n')),(0,l.kt)("p",null,"So far you have seen how Screenplay questions work in detail. This will help you implement your own if you need to. However Serenity also provides a number of shortcuts related to querying web pages, which you will find in the net.serenitybdd.screenplay.questions package, which allow you to write much more concise automation code. "),(0,l.kt)("h2",{id:"bundled-webdriver-questions"},"Bundled WebDriver Questions"),(0,l.kt)("p",null,"Serenity provides many bundled Question classes in the ",(0,l.kt)("inlineCode",{parentName:"p"},"net.serenitybdd.screenplay.questions")," package that a short-hand way of querying a web page. For example, the ",(0,l.kt)("inlineCode",{parentName:"p"},"Text")," class lets us retrieve the text content of an element, like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String name = sam.asksFor(Text.of("#name"));\n')),(0,l.kt)("p",null,"If there are many matching entries, we can retrieve them all using the ",(0,l.kt)("inlineCode",{parentName:"p"},"ofEach()")," method:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'Collection<String> names = sam.asksFor(Text.ofEach(".name"));\n')),(0,l.kt)("p",null,"The full list of Web Question classes is provided here."),(0,l.kt)("h3",{id:"absence"},"Absence"),(0,l.kt)("p",null,"Determine whether an element is ",(0,l.kt)("em",{parentName:"p"},"not")," present or visible on the page. A field that is present in the dom but is not rendered will be considered absent."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean isNotPresent = sam.asksFor(Absence.of("#no-such-field"));\n')),(0,l.kt)("h3",{id:"attribute"},"Attribute"),(0,l.kt)("p",null,"Check the value of an HTML attribute of a specified element."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String placeholderText = sam.asksFor(Attribute.of(".new-todo").named("placeholder"));\n')),(0,l.kt)("h3",{id:"checkboxvalue"},"CheckboxValue"),(0,l.kt)("p",null,"Determine whether a checkbox has been checked or not."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean termsAndConditionsApproved = sam.asksFor(CheckboxValue.of("#tnc"));\n')),(0,l.kt)("h3",{id:"cssvalue"},"CSSValue"),(0,l.kt)("p",null,"Retrieve the value of a specific CSS attribute of an element."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String font = sam.asksFor(CSSValue.of(target).named("font"));\n')),(0,l.kt)("h3",{id:"currentlyenabled"},"CurrentlyEnabled"),(0,l.kt)("p",null,"Check whether an element is currently enabled, without waiting."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean isCurrentlyEnabled = sam.asksFor(CurrentlyEnabled.of("#some-button"));\n')),(0,l.kt)("h3",{id:"currentvisibility"},"CurrentVisibility"),(0,l.kt)("p",null,"Check whether an element is currently visible, without waiting."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean isCurrentlyVisible = sam.asksFor(CurrentVisibility.of("#some-button"));\n')),(0,l.kt)("h3",{id:"disabled"},"Disabled"),(0,l.kt)("p",null,"Check whether an element is disabled."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean isDisabled = sam.asksFor(Disabled.of("#a-disabled-button"));\n')),(0,l.kt)("h3",{id:"displayed"},"Displayed"),(0,l.kt)("p",null,"Check whether an element is displayed. If the element is not currently displayed, the test will wait for a short delay to give it time to be displayed."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean isDisplayed = sam.asksFor(Displayed.of("#some-button"));\n')),(0,l.kt)("h3",{id:"enabled"},"Enabled"),(0,l.kt)("p",null,"Check whether an element is enabled. If the element is not currently enabled, the test will wait for a short delay to give it time to be enabled."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean isEnabled = sam.asksFor(Enabled.of("#some-button"));\n')),(0,l.kt)("h3",{id:"presence"},"Presence"),(0,l.kt)("p",null,"Check whether an element is present in the DOM. An invisible or hidden element can still be present in the DOM."),(0,l.kt)("h3",{id:"selectedstatus"},"SelectedStatus"),(0,l.kt)("p",null,"Alternative to ",(0,l.kt)("inlineCode",{parentName:"p"},"CheckboxValue")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'boolean termsAndConditionsApproved = sam.asksFor(SelectedStatus.of("#tnc"));\n')),(0,l.kt)("h1",{id:"text"},"Text"),(0,l.kt)("p",null,"To fetch the text value of an element, we can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"Text")," class:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String introductionText = sam.asksFor(Text.of("#introduction"));\n')),(0,l.kt)("h3",{id:"textcontent"},"TextContent"),(0,l.kt)("p",null,"In some cases, we may need to read the ",(0,l.kt)("inlineCode",{parentName:"p"},"textContent")," HTML property to get the text we need. To do this, we can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"TextContent")," class rather than ",(0,l.kt)("inlineCode",{parentName:"p"},"Text"),". This returns the text content of the specified element, and all its descendants."),(0,l.kt)("h3",{id:"thecoordinates"},"TheCoordinates"),(0,l.kt)("p",null,"Return the coordinates of a specified element."),(0,l.kt)("h3",{id:"thelocation"},"TheLocation"),(0,l.kt)("p",null,"Return where on the page is the top left-hand corner of the rendered element."),(0,l.kt)("h3",{id:"thesize"},"TheSize"),(0,l.kt)("p",null,"What is the width and height of the rendered element?"),(0,l.kt)("h3",{id:"value"},"Value"),(0,l.kt)("p",null,"Return the HTML ",(0,l.kt)("inlineCode",{parentName:"p"},"value")," attribute of a specified element."),(0,l.kt)("h3",{id:"visibility"},"Visibility"),(0,l.kt)("p",null,"Determine whether this web element present and visible on the screen"),(0,l.kt)("h3",{id:"working-with-dropdowns"},"Working with Dropdowns"),(0,l.kt)("p",null,"We can query the current selected value or values of an HTML ",(0,l.kt)("inlineCode",{parentName:"p"},"<SELECT>")," element using the ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedValue"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedValues"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedVisibleTextValue")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedVisibleTextValue")," Question classes."),(0,l.kt)("p",null,"For example, to find the current selected value of an HTML dropdown list, we could use the following code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String selectedColorValue = dina.asksFor(SelectedValue.of("#color-dropdown"));\n')),(0,l.kt)("p",null,"To get the visible text of the selected item, we would use ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedVisibleTextValue"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String selectedColor = dina.asksFor(SelectedVisibleTextValue.of("#color-dropdown"));\n')),(0,l.kt)("p",null,"For multi-selects, we can use ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedValues")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectedVisibleTextValues"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'List<String> selectedColors = dina.asksFor(SelectedValues.of("#color-dropdown"));\n')),(0,l.kt)("p",null,"We can retrieve the current list of options using ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectOptions"),", which returns the list of visible texts for each option:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'List<String> selectedColors = dina.asksFor(SelectOptions.of("#color-dropdown"));\n')),(0,l.kt)("p",null,"If we need the ",(0,l.kt)("inlineCode",{parentName:"p"},"value")," attribute of each dropdown option, we can use ",(0,l.kt)("inlineCode",{parentName:"p"},"SelectOptionValues"),", e.g.:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'List<String> selectedColors = dina.asksFor(SelectOptionValues.of("#color-dropdown"));\n')),(0,l.kt)("h2",{id:"handling-waits"},"Handling Waits"),(0,l.kt)("h3",{id:"using-the-waituntil-class"},"Using the WaitUntil class"),(0,l.kt)("p",null,"If you need to wait for an element to appear with Serenity Screenplay, there are a few options available. By default, Serenity will wait for a short delay if you try to interact with an element that is not on the page. However, you can ensure that this wait is sufficient by using the ",(0,l.kt)("inlineCode",{parentName:"p"},"WaitUntil")," class, as shown here: "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private final static Target DELAYED_BUTTON = PageElement.locatedBy("#delayed-button");\n\ndina.attemptsTo(\n    WaitUntil.the(DELAYED_BUTTON, WebElementStateMatchers.isVisible()),\n    Click.on(DELAYED_BUTTON)\n);\n')),(0,l.kt)("p",null,"This code will wait until the element is visible before proceeding to the Click action. The timeout can be configured (in milliseconds) using the ",(0,l.kt)("inlineCode",{parentName:"p"},"webdriver.timeouts.implicitlywait")," property, which is 5 seconds by default."),(0,l.kt)("p",null,"If you need to have a finer control over the timeout duration for specific situations, you can specify this by adding the ",(0,l.kt)("inlineCode",{parentName:"p"},"forNoMoreThan()")," method, which lets you specify an explicit timeout:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"dina.attemptsTo(\n    WaitUntil.the(DELAYED_BUTTON, isVisible()).forNoMoreThan(10).seconds()\n);\n")),(0,l.kt)("p",null,"You can also wait for other conditions. For example, to wait until an element dissapears, you can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"isNotVisible()")," matcher:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"dina.attemptsTo(\n    WaitUntil.the(DISAPPEARING_BUTTON, isNotVisible())\n);\n")),(0,l.kt)("p",null,"The following matchers are available in the ",(0,l.kt)("inlineCode",{parentName:"p"},"WebElementStateMatchers")," class. Note that all of the following methods also have a negative equivalent (",(0,l.kt)("inlineCode",{parentName:"p"},"isNotVisible()"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"isNotEmpty()")," etc.)."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Matcher"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"containsText(...)"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element contains a specific text value")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"containsOnlyText(...)"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element contains exactly a specific text value")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"containsSelectOption(...)"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that a dropdown element contains a specific text value as an option")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"isClickable"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element is visible and enabled")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"isEmpty"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element is not visible or contains an empty string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"isEnabled"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element is enabled")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"isPresent"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element is present on the page")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"isSelected"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element is selected")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"isVisible"),(0,l.kt)("td",{parentName:"tr",align:null},"Check that an element is visible")))),(0,l.kt)("h3",{id:"waiting-for-a-webdriver-condition"},"Waiting for a WebDriver condition"),(0,l.kt)("p",null,"Another option is to wait for a WebDriver condition (which can be found in the ",(0,l.kt)("inlineCode",{parentName:"p"},"org.openqa.selenium.support.ui.ExpectedConditions")," class), e.g."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'dina.attemptsTo(\n        WaitUntil.the(\n                invisibilityOfElementLocated(By.id("disappearing-button")))\n);\n')),(0,l.kt)("h3",{id:"waiting-for-targets"},"Waiting for Targets"),(0,l.kt)("p",null,"You can also place a specific wait condition on a ",(0,l.kt)("inlineCode",{parentName:"p"},"Target")," object. You can do this either when you define the ",(0,l.kt)("inlineCode",{parentName:"p"},"Target")," variable (if it should be applied any time you interact with this element), or only when you interact with the element, as shown below:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private final static Target INVISIBLE_BUTTON \n    = PageElement.locatedBy("#invisible-button");\n\ndina.attemptsTo(\n    Click.on(INVISIBLE_BUTTON.waitingForNoMoreThan(Duration.ofSeconds(3)))\n);\n')))}p.isMDXComponent=!0}}]);